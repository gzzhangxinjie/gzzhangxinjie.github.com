---
layout: post
title: "临时调大 swap"
description: ""
category: "system"
tags: []
---
{% include JB/setup %}

在一些情况下，我们的内存会不够使用，那么在这种情况下我们需要临时调大 swap 分区的大小。

1. 创建存储文件
    
    {% highlight bash %}
# dd if=/dev/zero of=/path/to/swapfile bs=1024 count=10485760
    {% endhighlight %}
2. 设置权限

    {% highlight bash %}
# chown root:root /path/to/swapfile
# chmod 0600 /path/to/swapfile
    {% endhighlight %}

3. 创建swap

    {% highlight bash %}
# mkswap /path/to/swapfile
    {% endhighlight %}

4. 启用分区

    {%highlight bash %}
# swapon /path/to/swapfile
    {%endhighlight %}

5. 如果是需要每次启动的时候都用到这个分区，则编辑`/etc/fstab`文件，将
    `/path/to/swapfile none swap sw 0 0` 写到文件末尾.

6. 查看swap 分区的使用情况

    {% highlight bash %}
# swapon -s
    {%endhighlight%}

7. 停掉新添加的 swap 分区

    {%highlight bash %}
# swapoff /path/to/swapfile
    {%endhighlight%}
